#!/usr/bin/env sh
# Environment checks for Linux distributions (no strict flags)

need() { command -v "$1" >/dev/null 2>&1 || echo "- missing: $1"; }

printf '[Tools]\n'
for t in tmux fzf fd rg bat; do need "$t"; done | sed 's/^/- /' || true

printf '\n[System]\n'
if [ -f /etc/os-release ]; then
  # shellcheck disable=SC1091
  . /etc/os-release
  echo "- distribution: ${PRETTY_NAME:-$NAME}"
else
  echo "- distribution: (unknown)"
fi
if command -v uname >/dev/null 2>&1; then
  echo "- kernel: $(uname -sr)"
fi
echo "- shell: ${SHELL:-unknown}"

DATA_DIR="${XDG_DATA_HOME:-$HOME/.local/share}/relay"
STATE_DIR="${XDG_STATE_HOME:-$HOME/.local/state}/relay"

printf '\n[Relay]\n'
if [ -d "$DATA_DIR" ]; then
  echo "- data dir: $DATA_DIR (present)"
else
  echo "- data dir: $DATA_DIR (not created)"
fi
if [ -d "$STATE_DIR" ]; then
  echo "- state dir: $STATE_DIR (present)"
else
  echo "- state dir: $STATE_DIR (not created)"
fi
